[gd_scene load_steps=14 format=2]

[ext_resource path="res://assets/models/fish/salmon/salmon.glb" type="PackedScene" id=1]
[ext_resource path="res://assets/models/fish/salmon/textures/salmon.png" type="Texture" id=2]
[ext_resource path="res://assets/shaders/psx/psx_lit.shader" type="Shader" id=3]

[sub_resource type="ShaderMaterial" id=1]
shader = ExtResource( 3 )
shader_param/precision_ratio = Vector2( 4, 3 )
shader_param/precision_height = 240.0
shader_param/precision_multiplier = 1.0
shader_param/modulate_color = Color( 1, 1, 1, 1 )
shader_param/uv_scale = Vector2( 1, 1 )
shader_param/uv_offset = Vector2( 0, 0 )
shader_param/uv_pan_velocity = Vector2( 0, 0 )
shader_param/dither_enabled = true
shader_param/color_depth = 32
shader_param/fog_enabled = true
shader_param/fog_color = Color( 0.5, 0.7, 1, 1 )
shader_param/min_fog_distance = 10.0
shader_param/max_fog_distance = 40.0
shader_param/draw_distance_enabled = false
shader_param/min_draw_distance = 2.0
shader_param/max_draw_distance = 40.0
shader_param/albedoTex = ExtResource( 2 )

[sub_resource type="AnimationNodeAdd2" id=2]
filter_enabled = true
filters = [ "root/Skeleton:root.x", "root/Skeleton:spine_01.x" ]

[sub_resource type="AnimationNodeAnimation" id=3]
animation = "RESET"

[sub_resource type="AnimationNodeAnimation" id=4]
animation = "turn_left"

[sub_resource type="AnimationNodeAnimation" id=5]
animation = "turn_right"

[sub_resource type="AnimationNodeBlendSpace1D" id=6]
blend_point_0/node = SubResource( 3 )
blend_point_0/pos = 0.0
blend_point_1/node = SubResource( 4 )
blend_point_1/pos = -1.0
blend_point_2/node = SubResource( 5 )
blend_point_2/pos = 1.0

[sub_resource type="AnimationNodeAnimation" id=7]
animation = "idle_cycle"

[sub_resource type="AnimationNodeAnimation" id=8]
animation = "swim_cycle"

[sub_resource type="AnimationNodeBlendSpace1D" id=9]
blend_point_0/node = SubResource( 7 )
blend_point_0/pos = 0.0
blend_point_1/node = SubResource( 8 )
blend_point_1/pos = 1.0

[sub_resource type="AnimationNodeBlendTree" id=10]
graph_offset = Vector2( -681, 87.75 )
nodes/turn_add/node = SubResource( 2 )
nodes/turn_add/position = Vector2( 20, 100 )
nodes/turn_direction/node = SubResource( 6 )
nodes/turn_direction/position = Vector2( -340, 260 )
nodes/velocity/node = SubResource( 9 )
nodes/velocity/position = Vector2( -360, 120 )
node_connections = [ "output", 0, "turn_add", "turn_add", 0, "velocity", "turn_add", 1, "turn_direction" ]

[node name="Salmon" instance=ExtResource( 1 )]

[node name="Salmon" parent="root/Skeleton" index="0"]
material/0 = SubResource( 1 )

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource( 10 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/turn_add/add_amount = 0
parameters/turn_direction/blend_position = 0
parameters/velocity/blend_position = 0
